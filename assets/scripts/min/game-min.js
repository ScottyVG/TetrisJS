var drMarioGame=drMarioGame||{};drMarioGame.Game=function(){},console.log("Game state loaded"),drMarioGame.Game.prototype={create:function(){this.map=this.game.add.tilemap("drMarioLevel"),this.map.addTilesetImage("tiles","gameTiles"),this.backgroundLayer=this.map.createLayer("backgroundLayer"),this.blockedLayer=this.map.createLayer("blockedLayer"),this.map.setCollisionBetween(1,2e3,!0,"blockedLayer"),this.backgroundLayer.resizeWorld();var e=this.pillRandomizer();this.createVirus();for(var t=this.game.add.group(),r=0;2>r;r++)t.create(0+16*r,0,e[r]);this.player=this.game.add.group();var i=this.findObjectsByType("playerStartLeft",this.map,"objectsLayer");this.player=this.game.add.sprite(i[0].x,i[0].y,e[0]),this.player=this.game.add.sprite(i[0].x+16,i[0].y,e[1]),this.game.physics.arcade.enable(this.player),this.cursors=this.game.input.keyboard.createCursorKeys()},update:function(){this.game.physics.arcade.collide(this.player,this.blockedLayer),this.game.physics.arcade.collide(this.player,this.virus),this.player.body.velocity.x=0,this.player.body.velocity.y=12,this.cursors.down.isDown?(this.player.body.velocity.y+=100,console.log("down")):this.cursors.left.isDown?(this.player.body.velocity.x-=100,console.log("left")):this.cursors.right.isDown&&(this.player.body.velocity.x+=100,console.log("right"))},findObjectsByType:function(e,t,r){var i=new Array;return t.objects[r].forEach(function(r){r.type===e&&(r.y-=t.tileHeight,i.push(r))}),i},createFromTiledObject:function(e,t){var r=t.create(e.x,e.y,e.properties.sprite);Object.keys(e.properties).forEach(function(t){r[t]=e.properties[t]})},createVirus:function(){this.virus=this.game.add.group(),this.virus.enableBody=!0,result=this.findObjectsByType("virus",this.map,"virusLayer"),result.forEach(function(e){this.createFromTiledObject(e,this.virus)},this)},pillRandomizer:function(){var e=["leftRed","leftYellow","leftBlue"],t=["rightRed","rightYellow","rightBlue"],r=[];return r.push(e[Math.floor(3*Math.random())]),r.push(t[Math.floor(3*Math.random())]),console.log(r),r},destroy:function(e){e.destroy()}};